<!DOCTYPE html>
<html lang="en">

<head>
	{% include 'head.html' %}

</head>

<body>

	<div class="main-wrapper">

		{% include 'header.html' %}

		{% include 'sidebar.html' %}

		<div class="page-wrapper">
			<div class="content container-fluid">
				<div class="page-name 	mb-4">
					<h4 class="m-0"><img src="static/assets/img/profile.jpg" class="mr-1" alt="profile" /> Welcome Admin
					</h4>
					<label>Sun, 29 Nov 2019</label>
				</div>
				<div class="row mb-4">
					<div class="col-xl-6 col-sm-12 col-12">
						<div class="breadcrumb-path ">
							<ul class="breadcrumb">
								<li class="breadcrumb-item"><a href="index.html"><img src="static/assets/img/dash.png"
											class="mr-3" alt="breadcrumb" />Home</a>
								</li>
								<li class="breadcrumb-item active">Dashboard</li>
							</ul>
							<h3>Admin Dashboard</h3>
						</div>
					</div>
					<div class="col-xl-6 col-sm-12 col-12">
						<div class="row">
							<div class="col-xl-6 col-sm-6 col-12">
								<a class="btn-dash" href="#"> Admin Dashboard</a>
							</div>
							<div class="col-xl-6 col-sm-6 col-12">
								<a class="btn-emp" href="#"> Employees Dashboard</a>
							</div>



						</div>
					</div>
				</div>
				<div class="row mb-4">
					<div class="col-xl-3 col-sm-6 col-12">
						<div class="card board1 fill1 ">
							<div class="card-body">
								<div class="card_widget_header">
									<label>Employees</label>
									<h4>700</h4>
								</div>
								<div class="card_widget_img">
									<img src="static/assets/img/dash1.png" alt="card-img" />
								</div>
							</div>
						</div>
					</div>
					<div class="col-xl-3 col-sm-6 col-12">
						<div class="card board1 fill2 ">
							<div class="card-body">
								<div class="card_widget_header">
									<label>Companies</label>
									<h4>30</h4>
								</div>
								<div class="card_widget_img">
									<img src="static/assets/img/dash2.png" alt="card-img" />
								</div>
							</div>
						</div>
					</div>
					<div class="col-xl-3 col-sm-6 col-12">
						<div class="card board1 fill3 ">
							<div class="card-body">
								<div class="card_widget_header">
									<label>Leaves</label>
									<h4>9</h4>
								</div>
								<div class="card_widget_img">
									<img src="static/assets/img/dash3.png" alt="card-img" />
								</div>
							</div>
						</div>
					</div>
					<div class="col-xl-3 col-sm-6 col-12">
						<div class="card board1 fill4 ">
							<div class="card-body">
								<div class="card_widget_header">
									<label>Salary</label>
									<h4>$5.8M</h4>
								</div>
								<div class="card_widget_img">
									<img src="static/assets/img/dash4.png" alt="card-img" />
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-xl-6 d-flex mobile-h">
						<div class="card flex-fill">
							<div class="card-header">
								<div class="d-flex justify-content-between align-items-center">
									<h5 class="card-title">Total Employees</h5>
								</div>
							</div>
							<div class="card-body">
								<div id="invoice_chart"></div>
								<div class="text-center text-muted">
									<div class="row">
										<div class="col-4">
											<div class="mt-4">
												<p class="mb-2 text-truncate"><i
														class="fas fa-circle text-primary mr-1"></i> Business</p>
											</div>
										</div>
										<div class="col-4">
											<div class="mt-4">
												<p class="mb-2 text-truncate"><i
														class="fas fa-circle text-success mr-1"></i> Testing</p>
											</div>
										</div>
										<div class="col-4">
											<div class="mt-4">
												<p class="mb-2 text-truncate"><i
														class="fas fa-circle text-danger mr-1"></i> Development</p>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="col-xl-6 d-flex">
						<div class="card flex-fill">
							<div class="card-header">
								<div class="d-flex justify-content-between align-items-center">
									<h5 class="card-title">Total Salary By Unit</h5>
								</div>
							</div>
							<div class="card-body">
								<div id="sales_chart"></div>
							</div>
						</div>
					</div>
				</div>


				<div class="col-xl-12 col-sm-12 col-12 mb-4">
					<div class="head-link-set">
						<ul>
							<li><a class="active" href="#">All</a></li>
							<li><a href="#">Teams</a></li>
							<li><a href="employee-office.html">Offices</a></li>
						</ul>

						<a class="btn-add" data-bs-toggle="modal" data-bs-target="#1">Add Person</a>
					</div>
				</div>

				<div class="row">


				</div>
				<div class="col-xl-12 col-sm-12 col-12 mb-4">
					<div class="card">
						<div class="table-heading">
							<h2>Project Summery</h2>
						</div>
						<div class="table-responsive">
							<table class="table  custom-table no-footer">
								<thead>
									<tr>
										<th>Mã sinh viên</th>
										<th>Tuổi</th>
										<th>Giới tính</th>
										<th>Tình hình kinh tế</th>
										<th>GPA</th>
										<th>Số tín chỉ</th>
										<th>Vắng Không Phép</th>
										<th>Làm Thêm</th>
										<th>Tình Hình Sức Khỏe</th>
										<th>Kết Quả</th>
										<th>Tùy Chọn</th>

									</tr>
								</thead>
								<tbody>
									{% for student in students %}


									<tr>
										<td>{{ student['id'] }}</td>
										<td>{{ student['age'] }}</td>
										<td>{{ student['gender'] }}</td>
										<td>{{ student['economic_status'] }}</td>
										<td>{{ student['gpa'] }}</td>
										<td>{{ student['credits_completed'] }}</td>
										<td>{{ student['days_absent'] }}</td>
										<td>{{ student['part_time_job'] }}</td>
										<td>{{ student['health_status'] }}</td>
										<td>{{ student['result'] }}</td>
										<td>
											<button class="btn btn-warning edit-btn" data-id="{{ student['id'] }}"
												data-bs-toggle="modal" data-bs-target="#editStudentModal">Edit</button>
											<button class="btn btn-danger delete-btn"
												data-id="{{ student['id'] }}">Delete</button>
										</td>
									</tr>


								


									<script>
										// Ajax xử lý thêm học sinh
										$('#addStudentForm').on('submit', function (event) {
											event.preventDefault();
											var formData = {
												name: $('#name').val(),
												age: $('#age').val(),
												gender: $('#gender').val(),
												economic_status: $('#economic_status').val(),
												gpa: $('#gpa').val(),
												credits_completed: $('#credits_completed').val(),
												days_absent: $('#days_absent').val(),
												part_time_job: $('#part_time_job').val(),
												health_status: $('#health_status').val(),
												result: $('#result').val(),
											};

											$.ajax({
												url: '/students/create',
												method: 'POST',
												data: formData,
												success: function (response) {
													alert(response.message);
													location.reload();
												}
											});
										});

										// Ajax xử lý sửa học sinh
										$('#editStudentForm').on('submit', function (event) {
											event.preventDefault();
											var formData = {
												name: $('#editName').val(),
												age: $('#editAge').val(),
												gender: $('#editGender').val(),
												economic_status: $('#editEconomicStatus').val(),
												gpa: $('#editGPA').val(),
												credits_completed: $('#editCreditsCompleted').val(),
												days_absent: $('#editDaysAbsent').val(),
												part_time_job: $('#editPartTimeJob').val(),
												health_status: $('#editHealthStatus').val(),
												result: $('#editResult').val(),
											};

											var studentId = $('#editStudentId').val();

											$.ajax({
												url: '/students/update/' + studentId,
												method: 'POST',
												data: formData,
												success: function (response) {
													alert(response.message);
													location.reload();
												}
											});
										});

										// Ajax xử lý nút sửa học sinh
										$('.edit-btn').on('click', function () {
											var studentId = $(this).data('id');
											$.ajax({
												url: '/students/' + studentId,
												method: 'GET',
												success: function (response) {
													$('#editStudentId').val(response.id);
													$('#editName').val(response.name);
													$('#editAge').val(response.age);
													$('#editGender').val(response.gender);
													$('#editEconomicStatus').val(response.economic_status);
													$('#editGPA').val(response.gpa);
													$('#editCreditsCompleted').val(response.credits_completed);
													$('#editDaysAbsent').val(response.days_absent);
													$('#editPartTimeJob').val(response.part_time_job);
													$('#editHealthStatus').val(response.health_status);
													$('#editResult').val(response.result);
												}
											});
										});

										// Xử lý nút xóa học sinh
										$('.delete-btn').on('click', function () {
											var studentId = $(this).data('id');
											if (confirm("Are you sure you want to delete this student?")) {
												$.ajax({
													url: '/students/delete/' + studentId,
													method: 'POST',
													success: function (response) {
														alert(response.message);
														location.reload();
													}
												});
											}
										});
									</script>
									{% endfor %}

								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	</div>
	</div>
	</div>

	</div>
	<!-- Add Student Modal -->
	<div class="modal fade" id="1" tabindex="-1"
	aria-labelledby="addStudentModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="addStudentModalLabel">Add New Student
				</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal"
					aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<form id="addStudentForm">

					<div class="mb-3">
						<label for="age" class="form-label">Age</label>
						<input type="number" class="form-control" id="age" required>
					</div>
					<div class="mb-3">
						<label for="gender" class="form-label">Gender</label>
						<input type="text" class="form-control" id="gender"
							required>
					</div>
					<div class="mb-3">
						<label for="gpa" class="form-label">GPA</label>
						<input type="number" class="form-control" id="gpa" required>
					</div>
					<!-- Add more fields here as necessary -->
					<button type="submit" class="btn btn-primary">Add</button>
				</form>
			</div>
		</div>
	</div>
</div>

<!-- Edit Student Modal -->
<div class="modal fade" id="editStudentModal" tabindex="-1"
	aria-labelledby="editStudentModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="editStudentModalLabel">Edit Student</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal"
					aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<form id="editStudentForm">
					
					<div class="mb-3">
						<label for="editAge" class="form-label">Age</label>
						<input type="number" class="form-control" id="editAge"
							required>
					</div>
					<div class="mb-3">
						<label for="editGender" class="form-label">Gender</label>
						<input type="text" class="form-control" id="editGender"
							required>
					</div>
					<div class="mb-3">
						<label for="editGPA" class="form-label">GPA</label>
						<input type="number" class="form-control" id="editGPA"
							required>
					</div>
					<button type="submit" class="btn btn-warning">Save
						Changes</button>
				</form>
			</div>
		</div>
	</div>
</div>


</body>

</html>